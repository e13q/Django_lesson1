
# Яндекс.Афиша 

В данном проекте реализован интерактивная карта Москвы, на которой представлены различные точки для активного отдыха с подробными описаниями и комментариями.

В качестве ORM системы и админки используется Django.

Frontend часть реализована с помощью [предоставленной верстки](https://github.com/devmanorg/where-to-go-frontend/) + шаблонизатор Django.

### Как установить

Python3 должен быть установлен версии 3.7
Используйте `pip` для установки зависимостей:
```
pip install -r requirements.txt
```

Для корректной работы потребуется файл .env, содержащий обязательные переменные DJANGO_SECRET_KEY, ALLOWED_HOSTS, CROSS_OR

DJANGO_SECRET_KEY — это секретный ключ, используемый Django для обеспечения безопасности, например, для подписания cookies, защиты CSRF и других важных функций. Он должен быть уникальным и секретным.

ALLOWED_HOSTS — список доменных имен или IP-адресов, с которых разрешены запросы к вашему Django-приложению.

CROSS_OR — список доменов, с которых разрешены междоменные запросы (Cross-Origin Resource Sharing, CORS). Позволяет определенным источникам делать запросы к вашему API.

Пример:
```
DJANGO_SECRET_KEY = 'key'
ALLOWED_HOSTS = '["127.0.0.1", ".pythonanywhere.com"]'
CROSS_OR = '["http://*.pythonanywhere.com"]'
```
Также, в .env можно указать SECURE_HSTS_SECONDS, SESSION_COOKIE_SECURE, CSRF_COOKIE_SECURE

SECURE_HSTS_SECONDS — включает HTTP Strict Transport Security (HSTS).

SESSION_COOKIE_SECURE — указывает, что куки сессии должны передаваться только по HTTPS. Это помогает защитить данные от перехвата.

CSRF_COOKIE_SECURE — указывает, что CSRF-куки также должны передаваться только по HTTPS, что добавляет уровень защиты от атак.

Пример:
```
SECURE_HSTS_SECONDS = True
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
```

Потребуется выполнить первую миграцию

```
python3 backend/manage.py migrate
```

Также, для взаимодействия с админ-панелью необходимо создать суперпользователя:

```
python3 backend/manage.py createsuperuser
```

Заполнить базу данных можно с помощью админки, а также воспользовавшись менеджмент скриптом.
Пример:
```
python3 project/manage.py load_place https://raw.githubusercontent.com/devmanorg/where-to-go-places/refs/heads/master/places/%D0%9F%D0%B0%D0%B2%D0%B8%D0%BB%D1%8C%D0%BE%D0%BD%20%C2%AB%D0%9A%D0%BE%D1%81%D0%BC%D0%BE%D1%81%C2%BB%20%D0%BD%D0%B0%20%D0%92%D0%94%D0%9D%D0%A5.json
```

Пример Json-файла для заполнения с помощью скрипта:
```
{
    "title": "Павильон «Космос» на ВДНХ",
    "imgs": [
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/e5354d61df57cbd591fa3d6f8deb17f6.jpeg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/f9c34c9aec0d43226a7dda518026555a.jpg"
    ],
    "description_short": "«Космос» — это павильон на современной территории выставочного комплекса ВДНХ, построенный в 1939 году. Здание было расширено и приобрело существующий ныне вид в 1954 году. Тогда здесь установили купол из стали и стекла, который стал не только главной особенностью здания, но и гениальным архитектурным решением своего времени.",
    "description_long": "<p>В СССР именно в павильоне «Космос» демонстрировали экспонаты передовых сельскохозяйственных технологий и  новейшую космическую технику. После развала Союза экспозиция была забыта, частично свёрнута и оставлена там же, под большим куполом.</p><p>В течение многих лет часть павильона функционировала как выставочное пространство, а часть по-прежнему была заброшена. На среднем ярусе купола можно было обнаружить разбитые стёкла, куски фанеры и производственный мусор.</p><p>В 2016 году здесь начались реставрационные работы, в ходе которых были восстановлены стеклянный купол, панно из золотой смальты, внешний вид постройки, а также воссоздана уникальная утраченная в 1970-х годах люстра из рубинового стекла.</p><p>Сегодня в павильоне располагается выставочный центр «Космонавтика и авиация», а одним из его самых крупных экспонатов является макет модуля «Кристалл» орбитальной станции «Мир», который весит более 30 тонн.</p><p>Масштабная экспозиция состоит из трёх разделов, которые представляют как макеты, так и реальные космические аппараты, научные исследование в космической сфере, а также рассказывают о современном изучении космоса и прогнозах футуристов. Здесь также есть игровые симуляторы и 5D-кинотеатр.</p>",
    "coordinates": {
        "lng": "37.63759871907796",
        "lat": "55.82626129636804"
    }
}
```

Также, для получения данных реализован API эндпоинт по пути:
```
https://ваш_сайт/places/{id}
```
Например:
```
https://e13here.pythonanywhere.com/places/1/
```

Команда для запуска сервера  
Локальный запуск
```
python3 backend/manage.py runserver
```
Для деплоя проекта рекомендуем ознакомиться с [данной](https://docs.djangoproject.com/en/5.0/howto/deployment/) статьей.

### Примеры работы

Пример работы сайта:

[Опубликованный проект](https://e13here.pythonanywhere.com/)

![image](https://github.com/user-attachments/assets/e1704aef-62ce-4c19-a4f3-eda0ed83285b)



### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
